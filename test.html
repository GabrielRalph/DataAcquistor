<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <canvas id = "e1"></canvas>
    <canvas id = "e2"></canvas>
  </body>
  <script type = "module">
    import * as FaceMesh from "./Algorithm/FaceMesh.js"
    import {extractEyeFeatures, renderBoxSection, decode} from "./Algorithm/extractEyeFeatures.js"
    import * as Webcam from "./Utilities/Webcam.js"

    Webcam.setPredictor((input) => {
      let points = FaceMesh.getFacePointsFromVideo(input.video);
      let eyefeat = extractEyeFeatures(points, input.canvas);
      eyefeat = decode(eyefeat);
      renderBoxSection(eyefeat.left.pixels, document.getElementById("e1"));
      renderBoxSection(eyefeat.right.pixels, document.getElementById("e2"));
      console.log(eyefeat);
    })

    window.onclick = async () => {

      if (await Webcam.startWebcam()) {
        Webcam.startPredictions();
      }
    }
  </script>
  <style>
    #e1, #e2 {width: 40vw;}

  </style>
</html>
